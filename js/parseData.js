const weatherData = {
    "message": "accurate",
    "cod": "200",
    "count": 10,
    "list": [{
            "id": 5377100,
            "name": "Nipomo",
            "coord": {
                "lat": 35.0428,
                "lon": -120.476
            },
            "main": {
                "temp": 58.24,
                "pressure": 1014,
                "humidity": 87,
                "temp_min": 55.4,
                "temp_max": 60.8
            },
            "dt": 1534258560,
            "wind": {
                "speed": 3.49,
                "deg": 338.504
            },
            "sys": {
                "country": ""
            },
            "rain": null,
            "snow": null,
            "clouds": {
                "all": 90
            },
            "weather": [{
                "id": 701,
                "main": "Mist",
                "description": "mist",
                "icon": "50d"
            }]
        },
        {
            "id": 5324802,
            "name": "Arroyo Grande",
            "coord": {
                "lat": 35.1186,
                "lon": -120.5908
            },
            "main": {
                "temp": 58.62,
                "pressure": 1014,
                "humidity": 87,
                "temp_min": 57.2,
                "temp_max": 60.8
            },
            "dt": 1534258560,
            "wind": {
                "speed": 5.82,
                "deg": 130
            },
            "sys": {
                "country": ""
            },
            "rain": null,
            "snow": null,
            "clouds": {
                "all": 90
            },
            "weather": [{
                "id": 701,
                "main": "Mist",
                "description": "mist",
                "icon": "50d"
            }]
        },
        {
            "id": 5354552,
            "name": "Grover Beach",
            "coord": {
                "lat": 35.1216,
                "lon": -120.6213
            },
            "main": {
                "temp": 58.62,
                "pressure": 1014,
                "humidity": 87,
                "temp_min": 57.2,
                "temp_max": 60.8
            },
            "dt": 1534258560,
            "wind": {
                "speed": 5.82,
                "deg": 130
            },
            "sys": {
                "country": ""
            },
            "rain": null,
            "snow": null,
            "clouds": {
                "all": 90
            },
            "weather": [{
                "id": 701,
                "main": "Mist",
                "description": "mist",
                "icon": "50d"
            }]
        },
        {
            "id": 5378763,
            "name": "Oceano",
            "coord": {
                "lat": 35.0989,
                "lon": -120.6124
            },
            "main": {
                "temp": 58.62,
                "pressure": 1014,
                "humidity": 87,
                "temp_min": 57.2,
                "temp_max": 60.8
            },
            "dt": 1534258560,
            "wind": {
                "speed": 5.82,
                "deg": 130
            },
            "sys": {
                "country": ""
            },
            "rain": null,
            "snow": null,
            "clouds": {
                "all": 90
            },
            "weather": [{
                "id": 701,
                "main": "Mist",
                "description": "mist",
                "icon": "50d"
            }]
        },
        {
            "id": 5383431,
            "name": "Pismo Beach",
            "coord": {
                "lat": 35.1428,
                "lon": -120.6413
            },
            "main": {
                "temp": 58.62,
                "pressure": 1014,
                "humidity": 87,
                "temp_min": 57.2,
                "temp_max": 60.8
            },
            "dt": 1534258560,
            "wind": {
                "speed": 5.82,
                "deg": 130
            },
            "sys": {
                "country": ""
            },
            "rain": null,
            "snow": null,
            "clouds": {
                "all": 90
            },
            "weather": [{
                "id": 701,
                "main": "Mist",
                "description": "mist",
                "icon": "50d"
            }]
        },
        {
            "id": 5332963,
            "name": "Avila Beach",
            "coord": {
                "lat": 35.053,
                "lon": -120.5963
            },
            "main": {
                "temp": 58.06,
                "pressure": 1014,
                "humidity": 87,
                "temp_min": 55.4,
                "temp_max": 60.8
            },
            "dt": 1534258560,
            "wind": {
                "speed": 5.82,
                "deg": 130
            },
            "sys": {
                "country": ""
            },
            "rain": null,
            "snow": null,
            "clouds": {
                "all": 90
            },
            "weather": [{
                "id": 701,
                "main": "Mist",
                "description": "mist",
                "icon": "50d"
            }]
        },
        {
            "id": 5392329,
            "name": "Paso Robles",
            "coord": {
                "lat": 35.3666,
                "lon": -120.5344
            },
            "main": {
                "temp": 98.84,
                "pressure": 1014,
                "humidity": 88,
                "temp_min": 78.2,
                "temp_max": 99.8
            },
            "dt": 1534258560,
            "wind": {
                "speed": 5.82,
                "deg": 130
            },
            "sys": {
                "country": ""
            },
            "rain": null,
            "snow": null,
            "clouds": {
                "all": 90
            },
            "weather": [{
                "id": 800,
                "main": "Clear",
                "description": "sky is clear",
                "icon": "01d"
            }]
        },
        {
            "id": 5392323,
            "name": "San Luis Obispo",
            "coord": {
                "lat": 35.2827,
                "lon": -120.6597
            },
            "main": {
                "temp": 58.53,
                "pressure": 1014,
                "humidity": 87,
                "temp_min": 57.2,
                "temp_max": 60.8
            },
            "dt": 1534258560,
            "wind": {
                "speed": 5.82,
                "deg": 130
            },
            "sys": {
                "country": ""
            },
            "rain": null,
            "snow": null,
            "clouds": {
                "all": 90
            },
            "weather": [{
                "id": 701,
                "main": "Mist",
                "description": "mist",
                "icon": "50d"
            }]
        },
        {
            "id": 5372954,
            "name": "Morro Bay",
            "coord": {
                "lat": 35.1855,
                "lon": -120.7033
            },
            "main": {
                "temp": 58.62,
                "pressure": 1014,
                "humidity": 87,
                "temp_min": 57.2,
                "temp_max": 60.8
            },
            "dt": 1534258560,
            "wind": {
                "speed": 5.82,
                "deg": 130
            },
            "sys": {
                "country": ""
            },
            "rain": null,
            "snow": null,
            "clouds": {
                "all": 90
            },
            "weather": [{
                "id": 701,
                "main": "Mist",
                "description": "mist",
                "icon": "50d"
            }]
        },
        {
            "id": 5393180,
            "name": "Santa Maria",
            "coord": {
                "lat": 34.953,
                "lon": -120.4358
            },
            "main": {
                "temp": 58.24,
                "pressure": 1014,
                "humidity": 87,
                "temp_min": 55.4,
                "temp_max": 60.8
            },
            "dt": 1534258560,
            "wind": {
                "speed": 3.49,
                "deg": 338.504
            },
            "sys": {
                "country": ""
            },
            "rain": null,
            "snow": null,
            "clouds": {
                "all": 90
            },
            "weather": [{
                "id": 701,
                "main": "Mist",
                "description": "mist",
                "icon": "50d"
            }]
        }
    ]
};

let showMetric = false;

function getCityData(city) {
    let cityIdName;
    let cityDiv;
    let cityTemperature;
    let cityTemp;
    let humidity;
    let cityHumidity;
    let pressure;
    let cityPressure;
    let tempMin;
    let cityTempMin;
    let tempMax;
    let cityTempMax;
    let windSpeed;
    let cityWindSpeed;
    let windDirection;
    let cityWindDirection;
    let rainLevel;
    let cityRainLevel;
    let snowLevel;
    let citySnowLevel;
    let iconDirection;
    let cityIconWind;
    let iconId;
    let cityIcon;
    let dayNightIcon;
    let dayNight;
    let cityTime;
    let cityTimeId;
    let cityTimeStamp;

    for (let key in weatherData) {
        //access the keys
        for (let i = 0; i < weatherData.list.length; i++) {
            //accessing List Array, list of objects
            let listData = weatherData.list[i];
            //access individual City data
            // if (listData.name === city) {
            //     return (listData);
            // }

            //ADD CITY NAME
            cityIdName = "cityName" + i;
            cityDiv = document.getElementById(cityIdName);
            cityDiv.innerHTML = listData.name;

            //ADD TEMPERATURE TO CITY TABLE
            iconId = "cityIconTemperature" + i;
            cityIcon = document.getElementById(iconId);
            dayNightIcon = listData.weather[0].icon.slice(-1);
            if (dayNightIcon === 'd') {
                dayNight = 'day';
            } else {
                dayNight = 'night';
            }
            cityIcon.className = "wi wi-owm-" + dayNight + "-" + listData.weather[0].id;
            cityIcon.innerHTML=listData.weather[0].main;
            cityTemperature = "cityTemperature" + i;
            cityTemp = document.getElementById(cityTemperature);
            if (!showMetric) {
                cityTemp.innerHTML = listData.main.temp + " ℉";
            } else {
                cityTemp.innerHTML = Math.round(((listData.main.temp - 32)* 5/9) *100) / 100 + " °C";
            }

            //ADD HUMIDITY TO CITY TABLE
            humidity = "cityHumidity" + i;
            cityHumidity = document.getElementById(humidity);
            cityHumidity.innerHTML = "Humidity: " + listData.main.humidity + "%";

            //ADD PRESSURE TO CITY TABLE
            pressure = "cityPressure" + i;
            cityPressure = document.getElementById(pressure);
            if (!showMetric) {
                cityPressure.innerHTML = "Pressure: " + listData.main.pressure + " mbar";
            } else {
                cityPressure.innerHTML = "Pressure: " + listData.main.pressure + " hPa";
            }

            cityTime = new Date(listData.dt * 1000);
            cityTimeId = "timeStamp" + i;
            cityTimeStamp = document.getElementById(cityTimeId);
            cityTimeStamp.innerHTML = cityTime.toDateString().substr(4) + " " + cityTime.toTimeString().slice(0,8);

            //ADD TEMP MIN TO CITY TABLE
            tempMin = "cityTempMin" + i;
            cityTempMin = document.getElementById(tempMin);
            if (!showMetric) {
                cityTempMin.innerHTML = "Min: " + listData.main.temp_min + " ℉";
            } else {
                cityTempMin.innerHTML = "Min: " + Math.round(((listData.main.temp_min - 32)* 5/9) *100) / 100 + " °C";
            }

            //ADD TEMP MAX TO CITY TABLE
            tempMax = "cityTempMax" + i;
            cityTempMax = document.getElementById(tempMax);
            if (!showMetric) {
                cityTempMax.innerHTML = "Max: " + listData.main.temp_max + " ℉";
            } else {
                cityTempMax.innerHTML = "Max: " + Math.round(((listData.main.temp_max - 32)* 5/9) *100) / 100 + " °C";
            }

            //ADD WIND SPEED TO CITY TABLE
            windSpeed = "cityWindSpeed" + i;
            cityWindSpeed = document.getElementById(windSpeed);
            if (!showMetric) {
                cityWindSpeed.innerHTML = "Wind Speed: " + listData.wind.speed + "mph";
            } else {
                cityWindSpeed.innerHTML = "Wind Speed: " + Math.round((listData.wind.speed * 0.44704)*100) / 100 + " m/s";
            }

            //ADD WIND DIRECTION TO CITY TABLE
            windDirection = "cityWindDirection" + i;
            cityWindDirection = document.getElementById(windDirection);
            iconDirection = "cityIconSpeed" + i;
            cityIconWind = document.getElementById(iconDirection);
            //round to nearest integer
            roundedWindDirection = Math.round(listData.wind.deg);
            cityIconWind.className = "wi wi-wind towards-" + roundedWindDirection + "-deg";
            //determine wind direction
            if (roundedWindDirection <= 22) {
                cityWindDirection.innerHTML = "Wind Direction: N";
            } else if (roundedWindDirection <= 67) {
                cityWindDirection.innerHTML = "Wind Direction: NE";
            } else if (roundedWindDirection <= 112) {
                cityWindDirection.innerHTML = "Wind Direction: E";
            } else if (roundedWindDirection <= 157) {
                cityWindDirection.innerHTML = "Wind Direction: SE";
            } else if (roundedWindDirection <= 202) {
                cityWindDirection.innerHTML = "Wind Direction: S";
            } else if (roundedWindDirection <= 247) {
                cityWindDirection.innerHTML = "Wind Direction: SW";
            } else if (roundedWindDirection <= 292) {
                cityWindDirection.innerHTML = "Wind Direction: W";
            } else if (roundedWindDirection <= 337) {
                cityWindDirection.innerHTML = "Wind Direction: NW";
            } else if (roundedWindDirection <= 360) {
                cityWindDirection.innerHTML = "Wind Direction: N";
            }

            //ADD RAIN TO CITY TABLE
            rainLevel = "cityRain" + i;
            cityRainLevel = document.getElementById(rainLevel);
            if (listData.rain === null) {
                cityRainLevel.innerHTML = "Rain: " + "0.0" + " inches";
            } else {
                cityRainLevel.innerHTML = "Rain: " + listData.rain + " inches";
            }

            //ADD SNOW TO CITY TABLE
            snowLevel = "citySnow" + i;
            citySnowLevel = document.getElementById(snowLevel);
            if (listData.snow === null) {
                citySnowLevel.innerHTML = "Snow: " + "0.0" + " inches";
            } else {
                citySnowLevel.innerHTML = "Snow: " + listData.snow + " inches";
            }

            //UPDATE FOOTER
            lastUpdated = document.getElementById("LastUpdated");
            let d = new Date();

            lastUpdated.innerHTML = "Last updated on " + (d.getMonth() + 1) + "/" + d.getDate() + "/" + d.getFullYear() + " at " + d.getHours() + ":" + d.getMinutes();
        }
    }
}

let cityData = getCityData("San Luis Obispo");

let myBtn = document.getElementById("fToCButton");
myBtn.addEventListener("click", function() {
    let letter = myBtn.innerHTML;
    if (letter === "F") {
        myBtn.innerHTML = "C";
        showMetric = true;
        getCityData();
    } else {
        myBtn.innerHTML = "F";
        showMetric = false;
        getCityData();
    }
});

//console.log(cityData);